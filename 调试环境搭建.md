---
tags:
  - debug
time: 2025-09-19T09:50:00
---
# 1. 多机代码替换
```bash
#!/bin/bash

  

workspace_dir="/opt/conda/lib/python3.10/site-packages"

  

if [ $# -ne 1 ]; then

    echo "usage: $0 <new sglang version dir>"

    exit 1

fi

  

code_dir=$1

if [ ! -d "${code_dir}" ]; then

    echo "${code_dir} not exist!"

    exit 1

fi

  

docker_sglang_version=`cat ${workspace_dir}/sglang/version.py`

new_replace_sglang_version=`cat ${code_dir}/version.py`

if [ "${docker_sglang_version}" = "${new_replace_sglang_version}" ]; then

    echo "## sglang version equal, can replace code!"

else

    echo "## docker sglang version $docker_sglang_version not equal to $new_replace_sglang_version, cannot replace!!"

    exit 1

fi

  

if [ -d "${workspace_dir}/sglang_origin" ]; then

    rm -rf ${workspace_dir}/sglang

else

    mv ${workspace_dir}/sglang ${workspace_dir}/sglang_origin

fi

  

ln -s ${code_dir} ${workspace_dir}/sglang

ls -l ${workspace_dir} | grep sglang```
# 2. vscode配置
```json
{

    // Use IntelliSense to learn about possible attributes.

    // Hover to view descriptions of existing attributes.

    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387

    "version": "0.2.0",

    "configurations": [

        {

            "name": "Python Debugger",

            "type": "python",

            "request": "attach",

            "justMyCode": false,

            "listen": {

                "host": "localhost",

                "port": 5678

            },

        }

    ]

}
```

# 3. 代码加入
```python
from sglang.srt.entrypoints.http_server import launch_server

from sglang.srt.server_args import prepare_server_args

from sglang.srt.utils import kill_process_tree

  

if __name__ == "__main__":

    server_args = prepare_server_args(sys.argv[1:])

    if server_args.node_rank == 0:

        import debugpy

        debugpy.connect(5678)

        print("Debugger connected")

        debugpy.wait_for_client()

    try:

        launch_server(server_args)

    finally:

        kill_process_tree(os.getpid(), include_parent=False)
```
# 4. 库画线跳转不了切换python
![[Pasted image 20250919110702.png]]

>[(8 条消息) Debugpy——如何使用VSCode调试无法直接执行的Python程序 - 知乎](https://zhuanlan.zhihu.com/p/560405414)
>[(10 条消息) VS Code + debugpy 调试 PyTorch 多卡程序 - 知乎](https://zhuanlan.zhihu.com/p/697958365)
>


